Progress: AWS Infrastructure and CI/CD Integration

- Last Updated: 2025-05-10T12:15:00-04:00
- Completed:
  - Parsed `.agentic` configuration and environment settings
  - Created memories for tech stack and environment
  - Populated techContext.md, productContext.md, systemPatterns.md, activeContext.md
  - Integrated AuthButton into `page.tsx`, centralized auth flow and removed orphaned components
  - Updated CDK stack and workflows to output and fetch AWS Secrets Manager ARNs
  - Created `.env.local.example` and `.env.aws.example` files
  - Updated `.env.dev` and `.env.prod` with GitHub token and CDK output values
  - Added `export` and `preview:export` scripts in `package.json` and updated `amplify.yml` for static export
  - Added **Technologies** section to `README.md`
  - Fixed routing 404 by switching Amplify hosting to static export from `out/`
  - Updated README with local preview instructions
  - Fixed Next.js build errors by excluding infrastructure code from compilation
  - Consistently used yarn throughout (removed package-lock.json from infrastructure)
  - Added GitHub OIDC provider creation to CDK stack
  - Disabled automatic Amplify builds to ensure proper CI/CD workflow sequencing
  - Fixed Prisma client TypeScript errors
  - Disabled auto builds on main branch via CDK CfnBranch (enableAutoBuild: false)
  - Removed Amplify webhooks via CDK CustomResource Lambda
  - Suppressed SSM-secrets plugin warning in amplify.yml (export AMPLIFY_DISABLE_SSM)
  - Removed cache section in amplify.yml to avoid 404 cache warnings
  - Updated README with bootstrap script usage
  - Created `scripts/bootstrap.sh` for first-time setup
  - Updated `scripts/bootstrap.sh` to load `AWS_REGION` from env and fix `cdk bootstrap` invocation
  - Loaded `AMPLIFY_APP_ID` from env and fixed publish step in bootstrap script
  - Removed Lambda-based webhook cleaner from CDK stack in favor of direct AWS CLI commands
  - Created `scripts/clean-webhooks.js` utility for standalone webhook cleanup
  - Added webhook cleanup steps to GitHub Actions workflow, bootstrap script, and package.json scripts
  - Updated README with webhook cleanup documentation
  - Enhanced amplify.yml with better build caching, logging, and environment configuration
  - Implemented environment variables injection from Secrets Manager to Amplify
  - Updated GitHub workflows to pass environment variables securely between jobs
  - Fixed deployment problems by setting explicit environment variables
  - Solved Next.js static export deprecation warnings by updating to modern 'output: export' approach
  - Implemented dual-environment API routes that work both locally and in Amplify deployments
  - Fixed Prisma compatibility issues by removing Edge runtime from API routes
  - Made Next.js configuration adaptive to detect Amplify environments for proper static exports
  - Simplified Amplify deployment to use standard Next.js build output
  - Reconfigured amplify.yml to use proper artifacts without standalone mode
  - Streamlined build process to avoid complex server.js creation
  - Fixed 404 errors by using standard Next.js server-side rendering
  - Updated workflows and bootstrap script to support cleaner deployment approach
  - Removed custom pageExtensions override in next.config.js; cleaned .next and restarted dev to restore local routing
- Next:
  - Push latest build configuration changes to trigger a new deployment
  - Monitor Amplify build logs to verify successful site deployment
  - Test local development to ensure API routes work correctly
  - Document the simplified Amplify deployment approach
  - Prepare comprehensive deployment documentation for future developers
